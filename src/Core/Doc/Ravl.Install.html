<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<!--! docentry="Ravl.Installation" -->
<html>
  <head>
    <title>RAVL Installation instructions</title>
  </head>

  <body>

    <p> These instructions were developed for a Linux environment.  They
    should work for most Unix-type environments.  There are also instructions
    for compiling RAVL under <a href="Ravl.Installation.Windows.html">Microsoft
    Windows</a>.</p>

    <p> The instructions are for downloading the current version from the
    SourceForge Git repository.  If you prefer, you can download the <a
    href="http://sourceforge.net/projects/ravl/files/RAVL/1.1/RAVL-1.1.tar/download">latest release</a> as a tar
    archive (select "Download"). </p>

    <h2>RAVL Prerequisites</h2>

    <p> Building the RAVL library requires the use of an ANSI C++ compiler
    along with the <a href="http://www.gnu.org/software/make">GNU make</a>
    utility (or another compatible version of make).  Please make sure you
    have suitable software installed before attempting to build RAVL. The RAVL
    build process is actually managed by the <a href="Ravl.QMake.html"><def>QMake</def></a>
    utility. QMake is a flexible compilation aid, designed to provide a simpler
    interface to the GNU make program. As part of the RAVL instalation process,
    a copy of QMake will be configured and installed.
    </p>

    <p>The functionality provided by the RAVL library may be extended by the
    use of certain third-party libraries. For instance, using the libraries
    written by the <a href="http://ffmpeg.org">FFmpeg</a> project allows
    RAVL to process many types of multimedia files. A partial list of such
    libraries may be found <a href="Ravl.Installation.Contrib.html">here</a>.
    </p>

    <p>Any compatible third-party libraries that are installed on your system
    will automatically be utilised by RAVL. All the installer needs to do is
    ensure they are installed prior to running the RAVL configure program. We
    recommend that the <a href="http://www.gtk.org">gtk 2.0 library</a> is
    installed on your machine; much of RAVL will not be built if gtk is not
    installed.</p>

    
    <h2>Installing the RAVL library and applications</h2> 

    <ol>
      <li> Select a suitable location on your system in which to build RAVL.
           The amount of disk space required will vary depending both on the
           amount of extra functionality that gets built into RAVL (available
           third-party libraries) and on your particular system or compiler in
           use. We suggest that you budget for a requirement of around 10G of
           disk space.<br/>
           <br/>
      </li>

      <li> Download the source code (both for RAVL itself and for QMake):
           <pre><kbd>           git clone git://ravl.git.sourceforge.net/gitroot/ravl/ravl
           cd ravl
           git clone git://git.code.sf.net/p/quickmake/code QMake </kbd></pre>
      </li>

      <li> Configure the source to your system
           <pre><kbd>           ./configure </kbd></pre>
           This phase will locate the software tools required to build both RAVL
           and QMake. It will also determine the third-party libraries that are
           available to allow the extended functionality of RAVL to be enabled.
           It is possible for the user to shape how this configuration phase
           operates; including the possibility of over-riding what libraries RAVL
           will utilise and  where the RAVL library will be installed. Please
           refer to the following <a href="#advinst">Advanced Installation</a>
           section.<br/>
           <br/>
      </li>

      <li> Build the RAVL libraries
           <pre><kbd>           make </kbd></pre>
           All built binaries and objects will be created in a tree under where the
           initial configure was run. This stage will also build QMake.<br/>
           <br/>
      </li>

      <li> Install the RAVL libraries
           <pre><kbd>           make install </kbd></pre>
           By default, the RAVL libraries will be installed under the system
           <code>/usr/local</code> directory. You may need additional user
           privileges to complete this stage. <br/>
           <br/>
      </li>

      <li> Inform your system about RAVL<br/>
           <p>If you have installed RAVL to the standard location (under 
           <code>/usr/local</code>), your system should already be configured 
           to use the RAVL libraries and utilities. If not, or if you have
           selected a non-standard installation location for RAVL, there are
           two paths that need setting up:</p>

      <pre>        1) The bin directory (<code>/usr/local/bin</code> by default) should appear 
           in the <kbd>$PATH</kbd> environment variable, e.g. for bash users:

                      <kbd>export PATH=${PATH}:${HOME}/Ravl/bin</kbd>

        2) The lib directory needs to be made known to the loader,
           either by including it in the loader's configuration file
           (usually <code>/etc/ld.so.conf</code> or <code>/etc/ld.conf</code>) or by adding it
           to <kbd>$LD_LIBRARY_PATH</kbd>, e.g.:

              <kbd>export LD_LIBRARY_PATH=${LD_LIBRARY_PATH}:${HOME}/Ravl/lib</kbd></pre>
           <p>If you wish to use your own build system, rather than the one
           included with RAVL (QMake), your compiler and linker will also need
           to know the location of the RAVL header files and library.</p>

      </li>
    </ol>

    <p>You are now ready to begin programming with RAVL. Full documentation for
    the RAVL classes can then be found via the index
    <a href=../index.html>here</a> or from the <a href=Ravl.html>search page</a>,
    while an introductory guide to writing a RAVL program is available
    <a href=Ravl.Introduction.Getting_Started.html>here</a>.</p>


    <h2 id="advinst">Advanced Installation</h2>

    <p>This section details some of the more advanced concepts and command-line
    switches that can be used with the configure utility should the need arise.</p>

    <p>The default directories where RAVL is installed may be changed by adding
    the command-line switch <kbd>--prefix=</kbd><var>dir</var> to the configure
    command. This modifies the base installation directory from <code>/usr/local</code>
    to whatever value of <var>dir</var> the user supplies. For example:
    <pre>
    <kbd>./configure --prefix=$HOME</kbd></pre>

    will cause a subsequent '<kbd>make install</kbd>' to place RAVL under the
    user's home directory.  With the use of differing command-line switches,
    it is possible to re-direct where individual types of file are directed;
    for example:
    <pre>
    <kbd>./configure --libdir=$HOME/RavlLibs</kbd></pre>

    will redirect where the RAVL libraries are installed to. For a full list
    of options to re-direct individual file types, along with all of the 
    available command line options for configure, see the output from running
    <pre>
    <kbd>./configure --help</kbd></pre></p>
    
    <p>The configure program tailors the RAVL source to the environment present
    on your machine. Running configure will generate a <dfn>Config.Project</dfn>
    file that records how RAVL has been set up. This file drives how RAVL is
    built and what features are enabled.</p>

    <p>Configure will attempt to locate all of the optional external libraries
    that RAVL can employ, enabling the functionality for all those it finds.
    Those it does not find are dropped and their functionality is not included
    in RAVL.</p>

    <p>A <kbd>--with-</kbd><var>lib</var> configure switch is provided to
    actively demand that library '<var>lib</var>' be used. If this request is
    made but the library is not found, configure will error out. The 
    <kbd>--with-</kbd><var>lib</var> switch may be set to '<var>N</var>';
    '<var>No</var>'; etc. to disable any particular library from use. The switch
    <kbd>--without-</kbd><var>lib</var> has the same effect. For example:
    <pre>
    <kbd>./configure --with-OpenCV=N --with-libPNG</kbd></pre>
    is equivalent to
    <pre>
    <kbd>./configure --without-OpenCV --with-libPNG=Y</kbd></pre>

    and explicitly disables the use of OpenCV by RAVL (even if OpenCV is
    installed on the machine) while requiring libPNG.</p>

    <p>The configure program uses the
    <a href=http://www.freedesktop.org/wiki/Software/pkg-config>pkg-config</a>
    utility to locate the third-party libraries that RAVL can use. If the
    pkg-config meta file for a third-party library is not available in its
    usual location, configure provides an option to tell the configuration
    process where the file resides:</p>
    <pre>
    <kbd>--with-</kbd><var>lib</var><kbd>-pkgconf=</kbd><var>path-to/meta-file</var>

        For external libraries that support pkg-config, this switch 
        allows the user to specify the location and name of a pkg-config
        file for a particular library, <var>lib</var>.

        For example:

        <kbd>./configure --with-OpenCV-pkgconf=/opt/lib/pkg-config/opencv.pc</kbd>

        instructs the configuration process to use the specified file,
        <code>/opt/lib/pkg-config/opencv.pc</code>, as the pkg-config meta file. This
        enables the user to instruct RAVL to be built using a particular
        version of a third-party library.</pre>

    <p>Some of the third-party libraries  (LibJasper, LibTIFF, Zlib, JPEG and
    posixThreads) that may be used by RAVL do not support the pkg-config utility.
    To allow configuration with these, configure provides the command-line
    options:
    <pre>
    <kbd>--with-</kbd><var>lib</var><kbd>-include=</kbd><var>path-to-include-files</var>

        For libraries that do not normally use pkg-config (and those
        alone), this switch provides a mechanism for declaring where
        the library's header file(s) can be found.

    <kbd>--with-</kbd><var>lib</var><kbd>-library=</kbd><var>path-to/library-name</var>

        As for <kbd>--with-</kbd><var>lib</var><kbd>-include</kbd>, this is only provided for those
        libraries that do not normally support pkg-config. It allows
        declaration of both where the third party library may be found
        and also allows its name to be specified. When specifying the
        name of the library, do not include any format extension (the
        .a or .so suffix).</pre>

    <p>These two switches are typically used in tandem to override the
    defaults associated with a particular library. For example:</p>
    <pre>
    <kbd>./configure --with-JPEG-include=/opt/libjpeg-turbo/include \
                     --with-JPEG-library=/opt/libjpeg-turbo/lib/libjpeg</kbd></pre>

    <p>will employ libjpeg-turbo instead of the more usual JPEG library.
    As the libjpeg-turbo library is a direct, drop-in replacement for the
    JPEG library, use of these switches allows RAVL to use libjpeg-turbo's
    more optimal code on machines where it is installed.</p>

    <p>Setting any of these <kbd>--with-</kbd><var>lib-xxx</var> switches 
implies <kbd>--with-</kbd><var>lib</var> and thus mandates that configure
find and enable the library or error out. </p>

    <p>The RAVL build process uses the default compiler available in your system
path. Should you wish to change this, prior to running configure, set the
environment variables <def>CC</def> and/or <def>CXX</def> to the location(s) of the C and C++
compilers you wish to use. Other influential environment variables allow
for the redefinition of other commands for the build process to use or to
allow the specification of extra <def>CFLAGS</def> to use.</p>

    <p>A full list of configure's available command-line switches and significant
environment variables may be seen by issuing the command:
    <pre>
    <kbd>./configure --help</kbd></pre>

    By executing configure in a directory away from where you installed the RAVL
source, it is possible to separate out the build and source locations. For
instance, the commands:

    <pre>
    <kbd>mkdir ~/Source
    cd ~/Source
    tar -xvf $ArchivePath
    mkdir /tmp/Build
    cd /tmp/Build
    ~/Source/configure
    make
    make install</kbd></pre>

    will install the RAVL source in the Source directory under the user's home
location. RAVL itself will be built in the <code>/tmp/Build</code> directory which could
be later deleted to save space once RAVL has been installed.</p>



    <h2> See also </h2>

    <p> See also the README file in the distribution.</p>


    <hr>
    <address><a href="mailto:w.christmas@surrey.ac.uk">Bill Christmas</a></address>
<!-- Created: Fri Dec 23 09:31:09 GMT 2005 -->
<!-- hhmts start -->
Last modified: Tue Nov 22 15:36:43 GMT 2011
<!-- hhmts end -->
  </body>
</html>
